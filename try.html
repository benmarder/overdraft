<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="includes/style.css">
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"> </script>
	<script src="includes/d3.min.js"></script>
	<script>
	
    $.getJSON("includes/Data Sets/2003-2011.json", function(data) {
        //console.log(data.categories.housing.name_he);	   
        // sample data array
        var year2003=data.y2003;
        var year=year2003;
        var sample_data = [{
            "value": year.categories.education_culture_entertainment.fifths[5],
            "name": year.categories.education_culture_entertainment.name_he
        }, {
            "value": year.categories.food.fifths[5],
            "name": year.categories.food.name_he
        }, {
            "value": year.categories.housing_dwelling_and_household_maintenance.fifths[5],
            "name": year.categories.housing_dwelling_and_household_maintenance.name_he
        }, {
            "value": year.categories.clothing_and_footwear.fifths[5],
            "name": year.categories.clothing_and_footwear.name_he
        },{
        	 "value": year.categories.miscellaneous_goods_and_services.fifths[5],
              "name": year.categories.miscellaneous_goods_and_services.name_he,
        }, 
         {
            "value": year.categories.health.fifths[5],
            "name": year.categories.health.name_he
        }, {
            "value": year.categories.transport_and_communication.fifths[5],
            "name": year.categories.transport_and_communication.name_he
        }];
        var innerWidth = window.innerWidth;
        var areaChartHeight = 69;
        //var filterWidth=0.05171103 * innerWidth;
        //var areaChartWidth = innerWidth - filterWidth;
        var gap = innerWidth / 9;
        var left = -1 * gap;
        var year = "2003";
        var i = 0;

        var lineData = [{
            "x": i += gap,
            "y": 25055
        }, {
            "x": i += gap,
            "y": 170555
        }, {
            "x": i += gap,
            "y": 140555
        }, {
            "x": i += gap,
            "y": 22066
        }, {
            "x": i += gap,
            "y": 22055
        }, {
            "x": i += gap,
            "y": 19033
        }, {
            "x": i += gap,
            "y": 17044
        }, {
            "x": i += gap,
            "y": 14033
        }, {
            "x": i += gap,
            "y": 20055
        }];


        var svg = d3.select("body").append("svg")
            .attr("width", innerWidth)
            .attr("height", areaChartHeight);

        var area = d3.svg.area()
            .interpolate("monotone")
            .x(function(d) {
                return x(d.x);
            })
            .y0(areaChartHeight)
            .y1(function(d) {
                return y(d.y);
            });


        var lineFunction = d3.svg.line()
            .x(function(d) {
                return d.x;
            })
            .y(function(d) {
                return d.y;
            });

        var x = d3.scale.linear().range([0, innerWidth]);
        var y = d3.scale.linear().range([areaChartHeight+40,0]);

        x.domain(d3.extent(lineData, function(d) {
            return d.x;
        }));
        y.domain([0, d3.max(lineData, function(d) {
            return d.y;
        })]);

        svg.append("path")
            .attr("class", "area")
            .attr("d", area(lineData));

        var linegraph = svg.append("path")
            .attr("d", lineFunction(lineData))
            .attr("stroke", "red")
            .attr("stroke-width", 0)
            .attr("fill", "none");
        
        for (var i = 0; i < 9; ++i) {	
            $("body").append("<section class='year'>"+(year++)+"</section>");
            $(".year").eq(i).css({
                "width": gap - 1,
                "height": areaChartHeight,
                "left": left+=gap
            });  
        }
        //$("body").append("<section id='filter'>זה אני</section>");
        //$("#filter").css({"width":filterWidth,"height":areaChartHeight,"left":left+=gap});
        $(".year").click(function(){
           						$(".yearSelected").removeClass("yearSelected");
           						$(this).addClass("yearSelected");
           										
           });

    });
			
			
		</script>
	</head>
	<body>
		
			</body>


</html>